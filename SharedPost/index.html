<!DOCTYPE html>
<html>
  <head>
    <title>Open in ZoneUp App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script type="text/javascript">
      function handleRedirect() {
        // Platform detection
        const isAndroid = /Android/i.test(navigator.userAgent);
        const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);

        // Extract postId from both formats:
        // 1. Path format: /SharedPost/{postId}
        // 2. Query format: /SharedPost?postId={postId} (backward compatibility)
        let postId = window.location.pathname.split("/SharedPost/")[1];

        if (!postId) {
          // Fallback to query parameter if path format not found
          const urlParams = new URLSearchParams(window.location.search);
          postId = urlParams.get("postId");
        }

        // Clean up postId (remove any trailing slashes or parameters)
        if (postId) {
          postId = postId.split("/")[0].split("?")[0];
        }

        if (!postId) {
          // If no postId found, redirect to homepage or show error
          window.location.href = "https://zoneup.in";
          return;
        }

        // App links (UNCHANGED)
        const appDeepLink = `zoneup://SharedPost/${postId}`;

        // Tinder store links (KEPT AS-IS)
        const playStoreUrl =
          "https://play.google.com/store/apps/details?id=com.tinder";
        const appStoreUrl = "https://apps.apple.com/app/tinder/id547702041";

        // Attempt to open the app (UNCHANGED)
        window.location.href = appDeepLink;

        // Fallback after delay (UNCHANGED)
        setTimeout(() => {
          if (isAndroid) {
            window.location.href = playStoreUrl;
          } else if (isIOS) {
            window.location.href = appStoreUrl;
          }
        }, 800);
      }

      window.onload = handleRedirect;
    </script>
  </head>
  <body>
    <!-- No content displayed if the app is not installed -->
  </body>
</html>
